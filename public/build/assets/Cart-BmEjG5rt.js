import{r as l,j as e,$ as x,a as d}from"./app-CnuuUVAv.js";import{I as i}from"./indian-rupee-BpsN2FII.js";import{L as h}from"./Layout-CZWFnRXh.js";import"./index-9eWm-de7.js";import"./index-Fdi4hGc0.js";import"./index-C1K0-1mr.js";const j=({cartItems:a})=>{console.log(a);const[r,n]=l.useState([]);l.useEffect(()=>{n(a)},[a]);const u=async(t,s)=>{const o=[...r];o[t].quantity=s,n(o);try{const c=await d.put("/cart/update",{product_id:r[t].product_id,quantity:s});console.log("Quantity updated:",c.data.message)}catch(c){console.error("Error updating quantity:",c),n(a)}},p=async t=>{const s=r.filter((o,c)=>c!==t);n(s);try{console.log(r[t].product_id),await d.delete("/cart/remove",{params:{product_id:r[t].product_id}}),console.log("Item removed successfully")}catch(o){console.error("Error removing item:",o)}},m=r.reduce((t,s)=>t+parseFloat(s.product.price)*s.quantity,0);return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your Cart"}),r.length===0?e.jsx("p",{children:"Your cart is empty."}):r.map((t,s)=>e.jsxs("div",{className:"flex justify-between items-center border-b py-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl",children:t.product.productName}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(i,{size:15}),parseFloat(t.product.price).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",value:t.quantity,onChange:o=>u(s,parseInt(o.target.value)),className:"w-16 p-1 border rounded",min:"1"}),e.jsx("button",{onClick:()=>p(s),className:"ml-4 bg-red-500 text-white px-3 py-1 rounded",children:"Remove"})]})]},t.id)),r.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center",children:["Total: ",e.jsx(i,{size:18}),m.toFixed(2)]})}),r.length>0&&e.jsx(x,{href:"/checkout",children:e.jsx("button",{className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded",children:"Checkout"})})]})};function C({cartItems:a}){return e.jsx(h,{children:e.jsx(j,{cartItems:a})})}export{C as default};
